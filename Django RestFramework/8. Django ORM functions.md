
## üß© 1. `.filter()` vs `.get()` ‚Äî Summary Table

| Feature                       | `.filter()`                                      | `.get()`                                        |
| ----------------------------- | ------------------------------------------------ | ----------------------------------------------- |
| **Return type**               | **QuerySet** (can contain 0, 1, or many objects) | **Single object** (exactly one)                 |
| **When to use**               | When you expect **multiple** or **zero** matches | When you expect **exactly one** match           |
| **If no match found**         | Returns **empty QuerySet**                       | Raises `DoesNotExist` exception                 |
| **If multiple matches found** | Returns **all matches**                          | Raises `MultipleObjectsReturned` exception      |
| **Can be chained?**           | ‚úÖ Yes                                            | ‚ùå No (since it returns an object, not QuerySet) |

---
## üß† 2. Example in Context

Assume your model:
```python
class Inventory(models.Model):
    name = models.CharField(max_length=100)
    barcode = models.CharField(max_length=50, unique=True)
    quantity = models.IntegerField()

```

üß© Using `.filter()`

```python
# Returns a QuerySet (like a list)
items = Inventory.objects.filter(name="Apple")

# You can iterate or check existence
for i in items:
    print(i.barcode)

# Check if anything found
if items.exists():
    print("Found items!")
```

‚úÖ Safe ‚Äî never throws exceptions.  
üö´ But you have to handle it like a list (can be empty or contain many).

üß© Using `.get()`

```python
item = Inventory.objects.get(barcode="12345")
print(item.name)
```

‚úÖ Returns a single object directly.  
üö´ Raises an exception if not found or if multiple found:

```python
from django.core.exceptions import ObjectDoesNotExist, MultipleObjectsReturned

try:
    item = Inventory.objects.get(barcode="12345")
except ObjectDoesNotExist:
    print("No item found")
except MultipleObjectsReturned:
    print("More than one item found")
```

---

## üß© 3. Practical Usage Difference

| Scenario                                                            | Recommended Method        | Reason                                |
| ------------------------------------------------------------------- | ------------------------- | ------------------------------------- |
| Checking if a record **exists**                                     | `.filter()` + `.exists()` | Avoids exception                      |
| Fetching **exactly one** record by unique field (e.g., id, barcode) | `.get()`                  | Simpler, clear intent                 |
| Fetching **multiple** records matching condition                    | `.filter()`               | Returns a list-like QuerySet          |
| Handling optional records                                           | `.filter().first()`       | Returns first or `None`, no exception |
üîç Example: safer alternative to `.get()`

```python
item = Inventory.objects.filter(barcode="12345").first()
if item:
    print(item.name)
else:
    print("Not found")
```

‚úÖ No exception if not found.

### ‚ö° Quick Summary

| You want to...                | Use                  | Returns        |
| ----------------------------- | -------------------- | -------------- |
| Find one specific record      | `.get()`             | Model instance |
| Find several possible matches | `.filter()`          | QuerySet       |
| Check if record exists        | `.filter().exists()` | Boolean        |
| Avoid exceptions safely       | `.filter().first()`  | Model or None  |

---
## üß© 1. How `DoesNotExist` works in Django

Each **model class** in Django automatically has its **own custom exception class** for when `.get()` fails to find an object.

For example, if your model is:

```python
class Inventory(models.Model):
    name = models.CharField(max_length=100)
    barcode = models.CharField(max_length=50, unique=True)
```

Then Django automatically defines:

```python
Inventory.DoesNotExist
```

So you can write:

```python
try:
    item = Inventory.objects.get(barcode="12345")
except Inventory.DoesNotExist:
    print("No item found with that barcode")
```

‚úÖ **This is the correct and most common way** to catch the exception.

---

## üß† 2. Why not just use `object.DoesNotExist` literally

You **can‚Äôt** literally write:

```python
object.DoesNotExist
```

because `object` is a Python built-in class, **not** your model.  
It must be replaced by **your model class name**, like `Inventory`.

So:

```python
Inventory.DoesNotExist   ‚úÖ  (works)
object.DoesNotExist      ‚ùå  (will cause error)
```

---

## üß© 3. Alternate (generic) way to catch all models‚Äô exceptions

If you don‚Äôt want to import each model, Django also provides a **base class** for all these exceptions:

```python
from django.core.exceptions import ObjectDoesNotExist

try:
    item = Inventory.objects.get(barcode="12345")
except ObjectDoesNotExist:
    print("Item not found")
```

‚úÖ Works for **any** model ‚Äî not just `Inventory`.

---

## üß† Summary

|Use Case|Exception to Catch|Example|
|---|---|---|
|Specific to a model|`ModelName.DoesNotExist`|`Inventory.DoesNotExist`|
|Works for all models|`django.core.exceptions.ObjectDoesNotExist`|`ObjectDoesNotExist`|
|‚ùå Invalid|`object.DoesNotExist`|Will raise error|

---

### ‚úÖ Example (clean way)

```python
from django.core.exceptions import ObjectDoesNotExist
from .models import Inventory

try:
    item = Inventory.objects.get(barcode="12345")
except Inventory.DoesNotExist:
    print("Inventory item not found")
# OR (generic)
except ObjectDoesNotExist:
    print("No object found")
```

## üß© 1. `filter()`

üîπ Returns all records matching given condition(s).

```python
Inventory.objects.filter(quantity__gt=10)
```

‚û°Ô∏è Fetch all items with quantity greater than 10.

---

## üß© 2. `exclude()`

üîπ Opposite of `filter()`: returns all records **not matching** the condition.

```python
Inventory.objects.exclude(name__icontains='Apple')
```

‚û°Ô∏è Fetch all items except those whose name contains "Apple".

---

## üß© 3. `get()`

üîπ Returns exactly **one** object; raises exception if none or multiple found.

```python
Inventory.objects.get(barcode='12345')
```

‚û°Ô∏è Fetch item with exact barcode `12345`.

---

## üß© 4. `order_by()`

üîπ Orders the QuerySet by one or more fields.

```python
Inventory.objects.all().order_by('name')         # Ascending (A-Z)
Inventory.objects.all().order_by('-quantity')    # Descending (largest first)
```

‚û°Ô∏è Useful for sorting results before displaying them.

---

## üß© 5. `values()` / `values_list()`

üîπ Returns dictionaries or tuples instead of model instances.

```python
Inventory.objects.values('name', 'quantity')
```

‚û°Ô∏è Returns: `[{'name': 'Apple', 'quantity': 20}, ...]`

```python
Inventory.objects.values_list('name', flat=True)
```

‚û°Ô∏è Returns: `['Apple', 'Banana', ...]` ‚Äî just a list of names.

---

## üß© 6. `distinct()`

üîπ Removes duplicate records.

```python
Inventory.objects.values('category').distinct()
```

‚û°Ô∏è Get all unique categories from the inventory.

---

## üß© 7. `count()`

üîπ Returns number of records in the QuerySet.

```python
Inventory.objects.filter(quantity__lt=5).count()
```

‚û°Ô∏è Count how many items are low in stock.

---

## üß© 8. `exists()`

üîπ Quickly checks if any record exists (faster than fetching objects).

```python
if Inventory.objects.filter(barcode='12345').exists():
    print("Item already exists")
```

---

## üß© 9. `first()` / `last()`

üîπ Returns first or last object from the QuerySet (or `None` if empty).

```python
Inventory.objects.order_by('name').first()
```

‚û°Ô∏è Get the first alphabetically named item.

---

## üß© 10. `create()` / `get_or_create()` / `update_or_create()`

üîπ Quickly add or safely retrieve objects.

```python
Inventory.objects.create(name='Mango', barcode='111', quantity=5)
```

```python
item, created = Inventory.objects.get_or_create(barcode='111', defaults={'name': 'Mango'})
```

‚û°Ô∏è Avoids duplicates by retrieving if exists, otherwise creates.

---

## üß© 11. `update()`

üîπ Updates one or more fields in bulk (no `save()` needed).

```python
Inventory.objects.filter(name='Apple').update(quantity=50)
```

‚û°Ô∏è Efficient for bulk updates.

---

## üß© 12. `delete()`

üîπ Deletes records from database.

```python
Inventory.objects.filter(quantity=0).delete()
```

‚û°Ô∏è Remove out-of-stock items.

---

## üß© 13. `annotate()` + `aggregate()`

üîπ For performing calculations like count, sum, average, etc.

```python
from django.db.models import Count, Sum, Avg

# annotate: adds computed fields per item/group
Category.objects.annotate(total_items=Count('inventory'))

# aggregate: computes a single value over the entire table
Inventory.objects.aggregate(total_quantity=Sum('quantity'))
```

‚û°Ô∏è `annotate()` = per group  
‚û°Ô∏è `aggregate()` = overall summary

---

## üß© 14. `select_related()` / `prefetch_related()`

üîπ Optimize queries when using **ForeignKey** or **ManyToMany** relationships.

```python
Inventory.objects.select_related('category').all()
```

‚û°Ô∏è Reduces database hits (joins related tables in one query).

---

## üß© 15. `only()` / `defer()`

üîπ Load only specific fields (for performance).

```python
Inventory.objects.only('name', 'barcode')
```

‚û°Ô∏è Fetches only required fields instead of the entire model.

---

## üß© 16. `reverse()`

üîπ Reverse the ordering of a QuerySet.

```python
Inventory.objects.order_by('name').reverse()
```

---

## üß© 17. `bulk_create()` / `bulk_update()`

üîπ Insert or update many rows at once (very fast).

```python
Inventory.objects.bulk_create([
    Inventory(name='Orange', barcode='555', quantity=10),
    Inventory(name='Pineapple', barcode='666', quantity=15)
])
```

---

## üß† Example combining several methods

```python
Inventory.objects.filter(quantity__gt=0) \
    .exclude(name__icontains='Test') \
    .order_by('-quantity') \
    .values('name', 'quantity') \
    .distinct()
```

‚û°Ô∏è Fetch all _unique_, non-test items that are in stock, sorted by quantity descending.

---

Would you like me to make a **reference cheat sheet (one-page table)** of all these ORM methods for your Django project (you can keep it open while coding)?